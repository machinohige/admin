<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Çπ„Çø„ÉÉ„ÉïÁî®ÁÆ°ÁêÜÁîªÈù¢ - 2J „Ç¢„Éà„É©„ÇØ„Ç∑„Éß„É≥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: #f5f5f5;
            color: #000000;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1880px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .header {
            grid-column: 1 / -1;
            background: #000000;
            color: #ffffff;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header-left .status {
            font-size: 14px;
            opacity: 0.8;
        }

        .header-right {
            text-align: right;
        }

        .header-right .turn {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .header-right .time {
            font-size: 14px;
            opacity: 0.8;
        }

        .card {
            background: #ffffff;
            border: 2px solid #000000;
            padding: 25px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #000000;
        }

        .current-call-section {
            grid-column: 1 / -1;
        }

        .group-display {
            background: #f8f8f8;
            border: 3px solid #000000;
            padding: 30px;
            margin-bottom: 20px;
        }

        .group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .group-number {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .group-type {
            font-size: 16px;
            background: #000000;
            color: #ffffff;
            padding: 8px 16px;
            font-weight: 600;
        }

        .members-list {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
        }

        .member-item {
            background: #ffffff;
            border: 2px solid #e0e0e0;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
        }

        .member-info {
            font-weight: 600;
        }

        .member-badge {
            font-size: 12px;
            padding: 4px 12px;
            border: 1px solid #000000;
            background: #ffffff;
        }

        .member-badge.vip {
            background: #000000;
            color: #ffffff;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .button {
            padding: 18px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .button:hover {
            opacity: 0.8;
        }

        .button-primary {
            background: #000000;
            color: #ffffff;
        }

        .button-danger {
            background: #ffffff;
            color: #000000;
            border: 2px solid #000000;
        }

        .qr-scan-section {
            text-align: center;
            padding: 30px;
            background: #f8f8f8;
            border: 3px dashed #000000;
            margin-top: 20px;
        }

        .qr-scan-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .qr-scan-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .qr-scan-subtext {
            font-size: 14px;
            color: #666666;
        }

        .qr-result {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e9;
            border: 2px solid #000000;
            font-size: 16px;
            font-weight: 600;
            display: none;
        }

        .waiting-section {
            display: grid;
            gap: 15px;
        }

        .waiting-card {
            background: #f8f8f8;
            border: 2px solid #000000;
            padding: 20px;
        }

        .waiting-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .waiting-count {
            display: flex;
            gap: 30px;
            font-size: 14px;
        }

        .count-item {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        .count-number {
            font-size: 32px;
            font-weight: 700;
        }

        .count-label {
            font-size: 14px;
            color: #666666;
        }

        .call-next-button {
            grid-column: 1 / -1;
            padding: 25px;
            font-size: 20px;
            font-weight: 700;
            background: #000000;
            color: #ffffff;
            border: none;
            cursor: pointer;
            transition: opacity 0.2s;
            margin-top: 10px;
        }

        .call-next-button:hover {
            opacity: 0.8;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stat-card {
            background: #f8f8f8;
            border: 2px solid #000000;
            padding: 20px;
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #666666;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
        }

        .no-group {
            text-align: center;
            padding: 60px;
            color: #666666;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <h1>2J „Ç¢„Éà„É©„ÇØ„Ç∑„Éß„É≥ - „Çπ„Çø„ÉÉ„ÉïÁÆ°ÁêÜÁîªÈù¢</h1>
                <div class="status">11Êúà1Êó•ÔºàÈáëÔºâ | „É≠„Ç∞„Ç§„É≥‰∏≠</div>
            </div>
            <div class="header-right">
                <div class="turn" id="currentTurn">ÁèæÂú®: ‰∫àÁ¥Ñ„ÅÇ„ÇäÂÑ™ÂÖà„Çø„Éº„É≥</div>
                <div class="time" id="nextTime">Ê¨°Âõû‰∫àÊ∏¨ÊôÇÂàª: 14:35</div>
            </div>
        </div>

        <div class="card current-call-section">
            <div class="card-title">üì¢ ÁèæÂú®Âëº„Å≥Âá∫„Åó‰∏≠</div>
            
            <div id="groupDisplayArea">
                <div class="group-display">
                    <div class="group-header">
                        <div class="group-number" id="currentGroupNumber">GROUP 042</div>
                        <div class="group-type" id="currentGroupType">‰∫àÁ¥Ñ„ÅÇ„ÇäÂÑ™ÂÖà</div>
                    </div>

                    <div class="members-list" id="membersList">
                        <div class="member-item">
                            <div class="member-info">R12345 Â±±Áî∞Â§™ÈÉé„Åï„Çì - 2‰∫∫</div>
                            <div class="member-badge">‰∫àÁ¥Ñ„ÅÇ„Çä</div>
                        </div>
                        <div class="member-item">
                            <div class="member-info">W00089 Èà¥Êú®Ëä±Â≠ê„Åï„Çì - 2‰∫∫</div>
                            <div class="member-badge">‰∫àÁ¥Ñ„Å™„Åó</div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-bottom: 20px; font-size: 18px; font-weight: 600;" id="totalPeople">
                        ÂêàË®à: 4‰∫∫
                    </div>

                    <div class="action-buttons">
                        <button class="button button-primary" onclick="markArrived()">‚úì ÂÖ®Âì°Âà∞ÁùÄ</button>
                        <button class="button button-danger" onclick="markAbsent()">‚úó „ÅÑ„Å™„ÅÑ</button>
                    </div>
                </div>
            </div>

            <div class="qr-scan-section">
                <div class="qr-scan-icon">üì∑</div>
                <div class="qr-scan-text">QR„Ç≥„Éº„Éâ„Çí„Çπ„Ç≠„É£„É≥</div>
                <div class="qr-scan-subtext">„Ç´„É°„É©„Åæ„Åü„ÅØQR„É™„Éº„ÉÄ„Éº„ÅßË™≠„ÅøÂèñ„Å£„Å¶„Åè„Å†„Åï„ÅÑ</div>
                <button class="button button-primary" style="margin-top: 20px; width: 300px;" onclick="simulateScan()">
                    „Çπ„Ç≠„É£„É≥„Çí„Ç∑„Éü„É•„É¨„Éº„Éà
                </button>
                <div class="qr-result" id="qrResult">
                    ‚úì R12345 „ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„ÅüÔºà2‰∫∫Ôºâ
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">üë• ÂæÖÊ©üÁä∂Ê≥Å</div>
            
            <div class="waiting-section">
                <div class="waiting-card">
                    <div class="waiting-title">‰∫àÁ¥Ñ„ÅÇ„ÇäÂæÖÊ©ü</div>
                    <div class="waiting-count">
                        <div class="count-item">
                            <span class="count-number" id="reservationGroups">5</span>
                            <span class="count-label">ÁµÑ</span>
                        </div>
                        <div class="count-item">
                            <span class="count-number" id="reservationPeople">15</span>
                            <span class="count-label">‰∫∫</span>
                        </div>
                    </div>
                </div>

                <div class="waiting-card">
                    <div class="waiting-title">‰∫àÁ¥Ñ„Å™„ÅóÂæÖÊ©ü</div>
                    <div class="waiting-count">
                        <div class="count-item">
                            <span class="count-number" id="walkinGroups">3</span>
                            <span class="count-label">ÁµÑ</span>
                        </div>
                        <div class="count-item">
                            <span class="count-number" id="walkinPeople">8</span>
                            <span class="count-label">‰∫∫</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">üìä Êú¨Êó•„ÅÆÂÆüÁ∏æ</div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Ê°àÂÜÖÁµÑÊï∞</div>
                    <div class="stat-value" id="totalGroups">42</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Á∑è‰∫∫Êï∞</div>
                    <div class="stat-value" id="totalPeopleServed">162</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ê¨†Â∏≠ÁµÑÊï∞</div>
                    <div class="stat-value" id="absentGroups">3</div>
                </div>
            </div>
        </div>

        <button class="call-next-button" onclick="callNextGroup()">
            Ê¨°„ÅÆ„Ç∞„É´„Éº„Éó„ÇíÂëº„Å≥Âá∫„Åô ‚ñ∂
        </button>
    </div>

    <script>
        let currentGroupId = null;

        function callNextGroup() {
            if (confirm('Ê¨°„ÅÆ„Ç∞„É´„Éº„Éó„ÇíÂëº„Å≥Âá∫„Åó„Åæ„Åô„ÅãÔºü\n„Çµ„Ç§„Éç„Éº„Ç∏„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ')) {
                // „ÉÄ„Éü„Éº„Éá„Éº„Çø„ÅßÊõ¥Êñ∞
                const groupNum = parseInt(document.getElementById('currentGroupNumber').textContent.replace('GROUP ', '')) + 1;
                
                document.getElementById('currentGroupNumber').textContent = `GROUP ${String(groupNum).padStart(3, '0')}`;
                
                // „ÉÄ„Éü„Éº„É°„É≥„Éê„ÉºÁîüÊàê
                const members = generateDummyMembers();
                updateMembersList(members);
                
                alert(`GROUP ${String(groupNum).padStart(3, '0')} „ÇíÂëº„Å≥Âá∫„Åó„Åæ„Åó„Åü`);
                
                // ÂÆüË£Ö: API„Ç≥„Éº„É´
                /*
                fetch('/api/groups/call-next', { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ date: getCurrentDate() })
                })
                .then(r => r.json())
                .then(data => {
                    currentGroupId = data.groupId;
                    updateDisplay(data);
                });
                */
            }
        }

        function markArrived() {
            if (confirm('ÂÖ®Âì°Âà∞ÁùÄ„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„Åü„ÅãÔºü')) {
                alert('Ê°àÂÜÖÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇÊ¨°„ÅÆ„Ç∞„É´„Éº„Éó„ÇíÂëº„Å≥Âá∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                
                // Áµ±Ë®à„ÇíÊõ¥Êñ∞
                const currentTotal = parseInt(document.getElementById('totalGroups').textContent);
                document.getElementById('totalGroups').textContent = currentTotal + 1;
                
                const currentPeople = parseInt(document.getElementById('totalPeopleServed').textContent);
                document.getElementById('totalPeopleServed').textContent = currentPeople + 4;
                
                // ÂÆüË£Ö: API„Ç≥„Éº„É´
                /*
                fetch('/api/groups/mark-arrived', { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ groupId: currentGroupId })
                });
                */
            }
        }

        function markAbsent() {
            if (confirm('„Åì„ÅÆ„Ç∞„É´„Éº„Éó„ÅØÊ¨†Â∏≠„Å®„Åó„Å¶„Éû„Éº„ÇØ„Åï„Çå„Åæ„Åô„ÄÇ\nÊ¨°„ÅÆ„Ç∞„É´„Éº„Éó„ÇíÂëº„Å≥Âá∫„Åó„Åæ„Åô„ÅãÔºü')) {
                // Ê¨†Â∏≠Êï∞„ÇíÊõ¥Êñ∞
                const currentAbsent = parseInt(document.getElementById('absentGroups').textContent);
                document.getElementById('absentGroups').textContent = currentAbsent + 1;
                
                alert('Ê¨†Â∏≠„Å®„Åó„Å¶Ë®òÈå≤„Åó„Åæ„Åó„Åü');
                
                // ÂÆüË£Ö: API„Ç≥„Éº„É´
                /*
                fetch('/api/groups/mark-absent', { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ groupId: currentGroupId })
                })
                .then(() => callNextGroup());
                */
                
                setTimeout(() => callNextGroup(), 500);
            }
        }

        function simulateScan() {
            const result = document.getElementById('qrResult');
            const randomId = 'R' + Math.floor(10000 + Math.random() * 90000);
            const randomPeople = Math.floor(1 + Math.random() * 4);
            
            result.textContent = `‚úì ${randomId} „ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„ÅüÔºà${randomPeople}‰∫∫Ôºâ`;
            result.style.display = 'block';
            
            setTimeout(() => {
                result.style.display = 'none';
            }, 3000);
            
            // ÂÆüË£Ö: QR„Çπ„Ç≠„É£„É≥Âá¶ÁêÜ
            /*
            fetch('/api/scan-qr', { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ qrToken: scannedToken })
            })
            .then(r => r.json())
            .then(data => {
                showScanResult(data);
            });
            */
        }

        function generateDummyMembers() {
            const types = ['reservation', 'walkIn'];
            const memberCount = Math.floor(2 + Math.random() * 2);
            const members = [];
            
            for (let i = 0; i < memberCount; i++) {
                const type = types[Math.floor(Math.random() * types.length)];
                const prefix = type === 'reservation' ? 'R' : 'W';
                const id = prefix + Math.floor(10000 + Math.random() * 90000);
                const names = ['Â±±Áî∞', '‰ΩêËó§', 'Èà¥Êú®', 'Áî∞‰∏≠', 'È´òÊ©ã'];
                const name = names[Math.floor(Math.random() * names.length)];
                const people = Math.floor(1 + Math.random() * 3);
                
                members.push({ id, name, people, type });
            }
            
            return members;
        }

        function updateMembersList(members) {
            const membersList = document.getElementById('membersList');
            membersList.innerHTML = '';
            
            let totalPeople = 0;
            members.forEach(member => {
                totalPeople += member.people;
                const badge = member.type === 'reservation' ? '‰∫àÁ¥Ñ„ÅÇ„Çä' : '‰∫àÁ¥Ñ„Å™„Åó';
                
                membersList.innerHTML += `
                    <div class="member-item">
                        <div class="member-info">${member.id} ${member.name}„Åï„Çì - ${member.people}‰∫∫</div>
                        <div class="member-badge">${badge}</div>
                    </div>
                `;
            });
            
            document.getElementById('totalPeople').textContent = `ÂêàË®à: ${totalPeople}‰∫∫`;
        }

        function updateWaitingStatus() {
            // „ÉÄ„Éü„Éº„Éá„Éº„Çø„ÅßÊõ¥Êñ∞
            document.getElementById('reservationGroups').textContent = Math.floor(3 + Math.random() * 8);
            document.getElementById('reservationPeople').textContent = Math.floor(10 + Math.random() * 20);
            document.getElementById('walkinGroups').textContent = Math.floor(2 + Math.random() * 6);
            document.getElementById('walkinPeople').textContent = Math.floor(5 + Math.random() * 15);
        }

        // ÂÆöÊúüÁöÑ„Å´ÂæÖÊ©üÁä∂Ê≥Å„ÇíÊõ¥Êñ∞
        setInterval(updateWaitingStatus, 10000);

        // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ Firestore „É™„Ç¢„É´„Çø„Ç§„É†„É™„Çπ„Éä„Éº„Çí‰ΩøÁî®
        /*
        db.collection('current_call').doc('display').onSnapshot((doc) => {
            const data = doc.data();
            updateDisplay(data);
        });
        
        db.collection('reservations')
          .where('date', '==', today)
          .where('status', '==', 'checked_in')
          .onSnapshot((snapshot) => {
              updateWaitingStatus(snapshot);
          });
        */
    </script>
</body>
</html>
